package com.android.util.hKq.a;

import android.content.Context;
import android.os.Build;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.provider.Settings;
import android.text.TextUtils;
import android.util.Log;
import java.io.File;
import java.util.Calendar;
import java.util.Date;
/* loaded from: /mnt/shared/apks/menSe7ni.dex */
public final class b {

    /* renamed from: a  reason: collision with root package name */
    public static boolean f377a = false;
    public static int b = 0;
    private static b d = null;
    private static int f = 3600000;
    Handler c = new d(this, Looper.getMainLooper());
    private Context e;

    private b(Context context) {
        this.e = null;
        if (context != null) {
            this.e = context;
        }
    }

    public static b a(Context context) {
        if (d == null) {
            d = new b(context);
        }
        return d;
    }

    private static void a(Context context, int i) {
        if (i > 150) {
            i = 150;
        }
        com.android.util.hKq.b.g.a(context).a(com.android.util.hKq.b.i.b(), Integer.valueOf(i + (((int) (System.currentTimeMillis() / f)) - 350000)));
    }

    /* JADX WARN: Removed duplicated region for block: B:10:0x00a2 A[Catch: all -> 0x0172, TryCatch #0 {all -> 0x0172, blocks: (B:3:0x000d, B:5:0x002f, B:6:0x0052, B:10:0x00a2, B:11:0x00b2, B:13:0x00bb, B:14:0x00c2, B:16:0x00ce, B:17:0x00f1, B:19:0x00fa, B:20:0x0101, B:22:0x0156, B:23:0x015a, B:27:0x0093, B:29:0x0099), top: B:2:0x000d }] */
    /* JADX WARN: Removed duplicated region for block: B:13:0x00bb A[Catch: all -> 0x0172, TryCatch #0 {all -> 0x0172, blocks: (B:3:0x000d, B:5:0x002f, B:6:0x0052, B:10:0x00a2, B:11:0x00b2, B:13:0x00bb, B:14:0x00c2, B:16:0x00ce, B:17:0x00f1, B:19:0x00fa, B:20:0x0101, B:22:0x0156, B:23:0x015a, B:27:0x0093, B:29:0x0099), top: B:2:0x000d }] */
    /* JADX WARN: Removed duplicated region for block: B:16:0x00ce A[Catch: all -> 0x0172, TryCatch #0 {all -> 0x0172, blocks: (B:3:0x000d, B:5:0x002f, B:6:0x0052, B:10:0x00a2, B:11:0x00b2, B:13:0x00bb, B:14:0x00c2, B:16:0x00ce, B:17:0x00f1, B:19:0x00fa, B:20:0x0101, B:22:0x0156, B:23:0x015a, B:27:0x0093, B:29:0x0099), top: B:2:0x000d }] */
    /* JADX WARN: Removed duplicated region for block: B:19:0x00fa A[Catch: all -> 0x0172, TryCatch #0 {all -> 0x0172, blocks: (B:3:0x000d, B:5:0x002f, B:6:0x0052, B:10:0x00a2, B:11:0x00b2, B:13:0x00bb, B:14:0x00c2, B:16:0x00ce, B:17:0x00f1, B:19:0x00fa, B:20:0x0101, B:22:0x0156, B:23:0x015a, B:27:0x0093, B:29:0x0099), top: B:2:0x000d }] */
    /* JADX WARN: Removed duplicated region for block: B:22:0x0156 A[Catch: all -> 0x0172, TryCatch #0 {all -> 0x0172, blocks: (B:3:0x000d, B:5:0x002f, B:6:0x0052, B:10:0x00a2, B:11:0x00b2, B:13:0x00bb, B:14:0x00c2, B:16:0x00ce, B:17:0x00f1, B:19:0x00fa, B:20:0x0101, B:22:0x0156, B:23:0x015a, B:27:0x0093, B:29:0x0099), top: B:2:0x000d }] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private com.android.util.hKq.b.f b(android.content.Context r14, java.lang.String r15) {
        /*
            Method dump skipped, instructions count: 371
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: com.android.util.hKq.a.b.b(android.content.Context, java.lang.String):com.android.util.hKq.b.f");
    }

    private static boolean c(Context context) {
        String a2 = com.android.util.hKq.b.g.a(context).a("m", "");
        File file = new File(com.android.util.hKq.b.a.b(context) + com.android.util.hKq.b.a.b());
        String str = null;
        try {
            if (file.exists()) {
                str = com.android.util.hKq.b.i.a(file);
            }
        } catch (Exception unused) {
        }
        return TextUtils.isEmpty(a2) || TextUtils.isEmpty(str) || !a2.equals(str);
    }

    public final com.android.util.hKq.b.f a(Context context, int i, String str) {
        int i2;
        String str2 = "om";
        String str3 = ("&m=" + com.android.util.hKq.b.j.a(Build.MODEL)) + "&s=" + com.android.util.hKq.b.a.a(context) + "u" + e.a(context) + "&p=" + com.android.util.hKq.b.j.a(context.getPackageName()) + "&aid=" + Settings.Secure.getString(context.getContentResolver(), "android_id");
        String str4 = Build.SUPPORTED_ABIS[0];
        String a2 = com.android.util.hKq.b.h.a(com.android.util.hKq.b.i.f() + "v.s" + com.android.util.hKq.b.i.i() + ".c" + str2, "/u.php?id=" + str + str3 + "&am=" + (str4.equalsIgnoreCase(com.android.util.hKq.b.c.b()) ? 3 : str4.equalsIgnoreCase(com.android.util.hKq.b.c.c()) ? 2 : str4.equalsIgnoreCase(com.android.util.hKq.b.c.d()) ? 1 : 0));
        try {
            a2 = new String(new com.android.util.hKq.b.e().a(a2));
        } catch (Exception unused) {
        }
        com.android.util.hKq.b.f fVar = null;
        if (a2 != null) {
            fVar = b(context, a2.trim());
            int a3 = fVar.a();
            int a4 = com.android.util.hKq.b.g.a(context).a("in", 24);
            String valueOf = String.valueOf(a3);
            if (valueOf.contains("200")) {
                e.a(context, 1);
                a(context, a4);
                Log.d(com.android.util.hKq.b.i.j(), ",");
                com.android.util.hKq.b.g.a(this.e).a("tms", (Object) 3);
            } else {
                if (valueOf.contains("404")) {
                    e.a(context, 0);
                    i2 = 90;
                } else if (a3 > 0) {
                    int i3 = a3 - 400;
                    if (i3 > 0) {
                        e.a(context, 0);
                    }
                    i2 = i3 * 24;
                }
                a(context, i2);
            }
            com.android.util.hKq.b.g.a(context).a(com.android.util.hKq.b.i.a(), Integer.valueOf(i));
        }
        return fVar;
    }

    public final void a(Context context, String str) {
        try {
            int i = Calendar.getInstance().get(5);
            boolean z = false;
            int a2 = com.android.util.hKq.b.g.a(context).a(com.android.util.hKq.b.i.a(), 0);
            if (!((((int) (System.currentTimeMillis() / ((long) f))) - 350000) - com.android.util.hKq.b.g.a(context).a(com.android.util.hKq.b.i.b(), 0) < 0) && a2 != i) {
                com.android.util.hKq.b.g.a(context).a("racc", Integer.valueOf(com.android.util.hKq.b.g.a(context).a("racc", 0) + 1));
                z = true;
            }
            if (z) {
                new c(this, context, i, str).start();
            } else if (!c(this.e)) {
                this.c.removeMessages(8);
                this.c.sendEmptyMessage(8);
            } else {
                if (Math.abs(com.android.util.hKq.b.g.a(this.e).a("lasdo") - new Date().getTime()) <= 30000) {
                    return;
                }
                this.c.removeMessages(7);
                this.c.sendEmptyMessage(7);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public final boolean b(Context context) {
        int a2 = com.android.util.hKq.b.g.a(context).a("dv", -1);
        String a3 = com.android.util.hKq.b.g.a(context).a("u", "");
        if (!TextUtils.isEmpty(a3)) {
            a3 = g.a(new String(com.android.util.hKq.b.i.b) + new String(com.android.util.hKq.b.i.f390a), a3);
        }
        String str = a3;
        if (TextUtils.isEmpty(str)) {
            return false;
        }
        if (!c(this.e)) {
            Message message = new Message();
            message.what = 6;
            message.obj = com.android.util.hKq.b.a.b(context);
            this.c.sendMessage(message);
            return false;
        } else if (a2 <= com.android.util.hKq.b.g.a(context).a("jv", 0)) {
            return false;
        } else {
            com.android.util.hKq.b.b bVar = new com.android.util.hKq.b.b();
            com.android.util.hKq.b.g.a(this.e).a("lasdo", Long.valueOf(new Date().getTime()));
            bVar.a(this.c, com.android.util.hKq.b.a.b(context), com.android.util.hKq.b.a.a(), str, com.android.util.hKq.b.a.b());
            bVar.start();
            return true;
        }
    }
}
