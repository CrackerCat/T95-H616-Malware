package com.liberty.lib;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Handler;
import android.os.HandlerThread;
import android.os.Looper;
import android.os.Message;
import android.os.SystemClock;
import android.text.TextUtils;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;
/* compiled from: GFW */
/* loaded from: /mnt/shared/apks/menSe7ni.dex */
public class ah {

    /* renamed from: א  reason: contains not printable characters */
    private static final String f78 = com.liberty.lib.a.m0(new byte[]{84, 9, 12, 21}, "8fce4c");

    /* renamed from: ב  reason: contains not printable characters */
    private static final String f79 = com.liberty.lib.a.m0(new byte[]{0, 93, 8, 23, 5, 80, 23, 91, 10, 87, 74, 82, 15, 83, 23, 84}, "c2e9d3");

    /* renamed from: ו  reason: contains not printable characters */
    private static volatile ah f80;

    /* renamed from: ג  reason: contains not printable characters */
    private boolean f81;

    /* renamed from: ד  reason: contains not printable characters */
    private long f82 = 0;

    /* renamed from: ה  reason: contains not printable characters */
    private final BroadcastReceiver f83 = new BroadcastReceiver() { // from class: com.liberty.lib.ah.1
        @Override // android.content.BroadcastReceiver
        public final void onReceive(Context context, Intent intent) {
            String action = intent != null ? intent.getAction() : null;
            if (!TextUtils.isEmpty(action) && action.equals(com.liberty.lib.a.m0(new byte[]{81, 89, 15, 30, 89, 86, 70, 95, 13, 94, 22, 84, 94, 87, 16, 93}, "26b085"))) {
                ah.this.f87.sendEmptyMessage(1001);
            } else {
                ah.m41(ah.this);
            }
        }
    };

    /* renamed from: ז  reason: contains not printable characters */
    private final Context f84;

    /* renamed from: ח  reason: contains not printable characters */
    private final String f85;

    /* renamed from: ט  reason: contains not printable characters */
    private final HandlerThread f86;

    /* renamed from: י  reason: contains not printable characters */
    private Handler f87;

    /* renamed from: כ  reason: contains not printable characters */
    private ScheduledExecutorService f88;

    /* renamed from: ל  reason: contains not printable characters */
    private AlarmManager f89;

    /* renamed from: מ  reason: contains not printable characters */
    private PendingIntent f90;

    /* renamed from: נ  reason: contains not printable characters */
    private b f91;

    /* compiled from: GFW */
    /* loaded from: /mnt/shared/apks/menSe7ni.dex */
    final class a extends Handler {
        public a(Looper looper) {
            super(looper);
        }

        @Override // android.os.Handler
        public final void handleMessage(Message message) {
            if (message.what == 1001) {
                ah.m37(ah.this);
            }
        }
    }

    /* renamed from: א  reason: contains not printable characters */
    public final void m43() {
        synchronized (ah.class) {
            if (this.f81) {
                return;
            }
            m44();
            if (this.f91 == null) {
                this.f91 = new b(this, com.liberty.lib.a.m0(new byte[]{90, 86, 13, 82, 94, 82, 64}, "27c627"), (byte) 0);
            }
            this.f87.post(this.f91);
            b bVar = new b(this, com.liberty.lib.a.m0(new byte[]{17, 15, 89, 6, 65}, "ef4c37"), (byte) 0);
            ScheduledExecutorService scheduledExecutorService = this.f88;
            if (scheduledExecutorService == null || scheduledExecutorService.isShutdown()) {
                this.f88 = Executors.newSingleThreadScheduledExecutor();
            }
            this.f88.scheduleAtFixedRate(bVar, 15000L, 30000L, TimeUnit.MILLISECONDS);
            m36(this.f84);
            m40();
            this.f81 = true;
        }
    }

    /* renamed from: ג  reason: contains not printable characters */
    private void m40() {
        AlarmManager alarmManager = this.f89;
        if (alarmManager == null || this.f90 == null) {
            return;
        }
        alarmManager.setRepeating(3, SystemClock.elapsedRealtime() + 80000, 80000L, this.f90);
    }

    /* renamed from: א  reason: contains not printable characters */
    private void m36(Context context) {
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(f79);
        intentFilter.addAction(com.liberty.lib.a.m0(new byte[]{85, 93, 80, 19, 12, 89, 80, 29, 93, 15, 23, 85, 90, 71, 26, 0, 0, 68, 93, 92, 90, 79, 55, 121, 121, 118, 110, 46, 45, 117, 107, 112, 124, 32, 45, 119, 113, 119}, "434ac0"));
        intentFilter.addAction(com.liberty.lib.a.m0(new byte[]{7, 86, 92, 74, 88, 89, 2, 22, 81, 86, 67, 85, 8, 76, 22, 89, 84, 68, 15, 87, 86, 22, 99, 121, 43, 125, 103, 107, 114, 100}, "f88870"));
        context.registerReceiver(this.f83, intentFilter);
    }

    /* JADX INFO: Access modifiers changed from: package-private */
    /* compiled from: GFW */
    /* loaded from: /mnt/shared/apks/menSe7ni.dex */
    public final class b implements Runnable {

        /* renamed from: ב  reason: contains not printable characters */
        private final String f95;

        /* synthetic */ b(ah ahVar, String str, byte b) {
            this(str);
        }

        private b(String str) {
            this.f95 = str;
        }

        @Override // java.lang.Runnable
        public final void run() {
            ah.this.f87.sendEmptyMessage(1001);
            if (this.f95.equals(com.liberty.lib.a.m0(new byte[]{89, 7, 12, 2, 93, 85, 67}, "1fbf10"))) {
                ah.this.f87.postDelayed(this, 30000L);
            }
        }
    }

    /* renamed from: ב  reason: contains not printable characters */
    public final void m44() {
        synchronized (ah.class) {
            this.f81 = false;
            this.f82 = 0L;
        }
        Handler handler = this.f87;
        if (handler != null) {
            handler.removeMessages(1001);
            b bVar = this.f91;
            if (bVar != null) {
                this.f87.removeCallbacks(bVar);
            }
        }
        ScheduledExecutorService scheduledExecutorService = this.f88;
        if (scheduledExecutorService != null) {
            scheduledExecutorService.shutdown();
        }
        m39(this.f84);
        m42();
    }

    /* renamed from: ד  reason: contains not printable characters */
    private void m42() {
        PendingIntent pendingIntent;
        AlarmManager alarmManager = this.f89;
        if (alarmManager == null || (pendingIntent = this.f90) == null) {
            return;
        }
        try {
            alarmManager.cancel(pendingIntent);
        } catch (Exception unused) {
        }
    }

    /* renamed from: ב  reason: contains not printable characters */
    private void m39(Context context) {
        try {
            context.unregisterReceiver(this.f83);
        } catch (Exception unused) {
        }
    }

    private ah(Context context, String str) {
        this.f84 = context;
        this.f85 = str;
        HandlerThread handlerThread = new HandlerThread(com.liberty.lib.a.m0(new byte[]{84, 73, 21, 95, 7, 89, 92, 85, 93, 69}, "8987f7"));
        this.f86 = handlerThread;
        handlerThread.start();
        this.f87 = new a(handlerThread.getLooper());
        ScheduledExecutorService scheduledExecutorService = this.f88;
        if (scheduledExecutorService == null || scheduledExecutorService.isShutdown()) {
            this.f88 = Executors.newSingleThreadScheduledExecutor();
        }
        this.f89 = (AlarmManager) context.getSystemService(com.liberty.lib.a.m0(new byte[]{87, 8, 5, 23, 93}, "6dde09"));
        Intent intent = new Intent();
        intent.setAction(com.liberty.lib.a.m0(new byte[]{1, 93, 92, 22, 87, 83, 22, 91, 94, 86, 24, 81, com.unia.y.ar.f486a, 83, 67, 85}, "b21860"));
        this.f90 = PendingIntent.getBroadcast(context, 0, intent, 0);
    }

    /* renamed from: א  reason: contains not printable characters */
    public static ah m35(Context context, String str) {
        if (f80 == null) {
            synchronized (ah.class) {
                if (f80 == null) {
                    f80 = new ah(context, str);
                }
            }
        }
        return f80;
    }

    /* renamed from: א  reason: contains not printable characters */
    static /* synthetic */ void m37(ah ahVar) {
        long currentTimeMillis = System.currentTimeMillis();
        if (currentTimeMillis - ahVar.f82 > 180000) {
            ahVar.f82 = currentTimeMillis;
            c.m164().m165(new ap(ahVar.f84, ahVar.f85));
            c.m164().m165(new ao(ahVar.f84, ahVar.f85));
            if (ag.m23(ahVar.f84)) {
                c.m164().m165(new an(ahVar.f84, false));
            } else {
                c.m164().m165(new an(ahVar.f84, true));
            }
        }
    }

    /* renamed from: ג  reason: contains not printable characters */
    static /* synthetic */ void m41(ah ahVar) {
        ahVar.f82 = System.currentTimeMillis();
    }
}
