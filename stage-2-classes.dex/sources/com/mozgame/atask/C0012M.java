package com.mozgame.atask;

import android.content.Context;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.view.WindowManager;
import android.webkit.WebView;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

/* renamed from: com.mozgame.atask.M */
public final class C0012M {

    /* renamed from: j */
    private static int f29j = 30;

    /* renamed from: k */
    private static int f30k = 15;

    /* renamed from: l */
    private static C0012M f31l;

    /* renamed from: a */
    private final String f32a = "ASC_URL";

    /* renamed from: b */
    private WindowManager f33b;

    /* renamed from: c */
    private WindowManager.LayoutParams f34c;

    /* renamed from: d */
    private WebView f35d;

    /* renamed from: e */
    private RelativeLayout f36e;

    /* renamed from: f */
    private ImageView f37f;
    /* access modifiers changed from: private */

    /* renamed from: g */
    public boolean f38g;

    /* renamed from: h */
    private Context f39h;

    /* renamed from: i */
    private ExecutorService f40i;

    private C0012M(Context context) {
        this.f39h = context;
        this.f40i = Executors.newCachedThreadPool();
    }

    /* renamed from: a */
    public static void m32a(Context context, Bundle bundle) {
        C0044y.m135a("showTask");
        if (f31l == null) {
            f31l = new C0012M(context);
        }
        f31l.m33a(bundle);
        C0007H.m22a(context).mo14a(bundle.getString("CID", C0006G.m11a(context).mo13b("d92yjln6qcid", "")));
    }

    /* renamed from: a */
    private synchronized void m33a(Bundle bundle) {
        String string = bundle.getString("ASC_URL", C0006G.m11a(this.f39h).mo13b("ascsurl", "0"));
        if (!string.equals("0")) {
            if (Build.VERSION.SDK_INT > 24) {
                Intent intent = new Intent();
                intent.setData(Uri.parse(string));
                intent.setAction("android.intent.action.VIEW");
                intent.addFlags(268435456);
                this.f39h.startActivity(intent);
            } else {
                if (this.f39h != null) {
                    this.f33b = (WindowManager) this.f39h.getSystemService("window");
                    WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams(-1, -1, 2005, 8, 1);
                    if (Build.VERSION.SDK_INT <= 19) {
                        layoutParams = new WindowManager.LayoutParams(-1, -1, 2003, 8, 1);
                    }
                    layoutParams.flags = 296;
                    layoutParams.alpha = 1.0f;
                    layoutParams.format = 1;
                    layoutParams.verticalMargin = 0.05f;
                    layoutParams.gravity = 17;
                    this.f34c = layoutParams;
                    if (this.f36e == null) {
                        this.f36e = new RelativeLayout(this.f39h);
                        this.f36e.setGravity(16);
                    }
                    if (this.f36e.getParent() == null) {
                        this.f33b.addView(this.f36e, this.f34c);
                    }
                    this.f36e.setVisibility(8);
                    if (this.f35d == null) {
                        this.f35d = new WebView(this.f39h);
                    }
                    this.f35d.getSettings().setJavaScriptEnabled(true);
                    this.f35d.setLayoutParams(new RelativeLayout.LayoutParams(-1, -1));
                    if (this.f35d.getParent() == null) {
                        this.f36e.addView(this.f35d);
                    }
                    if (this.f37f == null) {
                        this.f37f = new ImageView(this.f39h);
                        this.f37f.setImageBitmap(BitmapFactory.decodeResource(this.f39h.getResources(), 17301533));
                        this.f37f.setScaleType(ImageView.ScaleType.FIT_CENTER);
                        this.f37f.setOnClickListener(new C0013N(this));
                        this.f37f.setClickable(true);
                    }
                    float a = C0038s.m108a(this.f39h);
                    int i = (int) (((float) f30k) * a);
                    int i2 = (int) (a * ((float) f29j));
                    RelativeLayout.LayoutParams layoutParams2 = new RelativeLayout.LayoutParams(i2, i2);
                    layoutParams2.rightMargin = i;
                    layoutParams2.topMargin = i;
                    layoutParams2.addRule(11);
                    this.f37f.setLayoutParams(layoutParams2);
                    if (this.f37f.getParent() == null) {
                        this.f36e.addView(this.f37f);
                    }
                }
                if (this.f35d != null) {
                    this.f35d.setWebViewClient(new C0014O(this));
                    this.f35d.loadUrl(string);
                }
            }
        }
    }

    /* renamed from: a */
    static /* synthetic */ void m34a(C0012M m) {
        if (m.f36e != null && m.f36e.getParent() != null) {
            m.f33b.removeView(m.f36e);
            m.f36e.removeAllViews();
            m.f36e = null;
        }
    }

    /* renamed from: c */
    static /* synthetic */ void m37c(C0012M m) {
        if (m.f36e != null) {
            m.f36e.setVisibility(0);
            C0006G.m11a(m.f39h).mo10a("d92yjln6qasats", System.currentTimeMillis());
        }
    }
}
